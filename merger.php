<?php
/*
  merge.php
  Î£Ï…Î½ÎµÎ½ÏÎ½ÎµÎ¹ Î±ÏÏ‡ÎµÎ¯Î± Ï„ÏÏ€Î¿Ï… .001, .002, .003 ... ÏƒÎµ Î­Î½Î± ÎµÎ½Î¹Î±Î¯Î¿ Î±ÏÏ‡ÎµÎ¯Î¿.
  Î .Ï‡. 498022s9b.sh3d.001 + 498022s9b.sh3d.002 â†’ 498022s9b.sh3d
*/

// ---- Î¡Î¥Î˜ÎœÎ™Î£Î— ----
$baseFileName = "498022s9b.sh3d";   // Î’Î¬Î»Îµ ÎµÎ´Ï Ï„Î¿ Î±ÏÏ‡Î¹ÎºÏŒ ÏŒÎ½Î¿Î¼Î± Ï„Î¿Ï… Î±ÏÏ‡ÎµÎ¯Î¿Ï… ÏƒÎ¿Ï… (Î§Î©Î¡Î™Î£ .001)
$parts = glob($baseFileName . '.*');  // Î .Ï‡. 498022s9b.zip.001, 498022s9b.zip.002

if (count($parts) == 0) {
  die("âŒ Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ ÎºÎ¿Î¼Î¼Î¬Ï„Î¹Î± Î³Î¹Î± Î­Î½Ï‰ÏƒÎ·. Î’ÎµÎ²Î±Î¹ÏÏƒÎ¿Ï… ÏŒÏ„Î¹ Ï„Î± Î­Ï‡ÎµÎ¹Ï‚ Î±Î½ÎµÎ²Î¬ÏƒÎµÎ¹ Ï€.Ï‡. 498022s9b.zip.001, 498022s9b.zip.002");
}

// Î¤Î±Î¾Î¹Î½ÏŒÎ¼Î·ÏƒÎ· Î³Î¹Î± ÏƒÏ‰ÏƒÏ„Î® ÏƒÎµÎ¹ÏÎ¬
sort($parts, SORT_NATURAL);

$mergedFile = $baseFileName;
$out = fopen($mergedFile, "wb");
if (!$out) {
  die("âŒ Î‘Ï€Î¿Ï„Ï…Ï‡Î¯Î± Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î±Ï‚ Î±ÏÏ‡ÎµÎ¯Î¿Ï… ÎµÎ¾ÏŒÎ´Î¿Ï…: $mergedFile");
}

foreach ($parts as $p) {
  echo "ğŸ”¹ Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±: $p<br>";
  $in = fopen($p, "rb");
  if ($in) {
    stream_copy_to_stream($in, $out);
    fclose($in);
  } else {
    echo "âš ï¸ Î”ÎµÎ½ Î¼Ï€Î¿ÏÏ Î½Î± Î±Î½Î¿Î¯Î¾Ï‰ Ï„Î¿ $p<br>";
  }
}
fclose($out);

echo "<hr>âœ… ÎŸÎ»Î¿ÎºÎ»Î·ÏÏÎ¸Î·ÎºÎµ! Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î®Î¸Î·ÎºÎµ Ï„Î¿ Î±ÏÏ‡ÎµÎ¯Î¿ <b>$mergedFile</b>.<br>";
echo "ÎœÏ€Î¿ÏÎµÎ¯Ï‚ Ï„ÏÏÎ± Î½Î± Î´Î¹Î±Î³ÏÎ¬ÏˆÎµÎ¹Ï‚ Ï„Î± ÎµÏ€Î¹Î¼Î­ÏÎ¿Ï…Ï‚ .001, .002 ÎºÎ»Ï€.";
?>
